import sys
import operator
import numpy as np

def pick_top_index(alpha,top_few):
    alpha_top_index = []
    for x in alpha:
        top_index = []
        m = sorted(enumerate(x),key=operator.itemgetter(1),reverse=True)
        for i in m[:top_few]:
            top_index.append(i)
        alpha_top_index.append(top_index)
    
    return np.array(alpha_top_index)
        
alpha2 = np.array([[ 0.59021668,  0.03953716,  0.0393886 ,  0.02819339,  0.24855747,
         0.0308985 ,  0.07765946,  0.0692754 ,  0.07460225,  0.07178495,
         0.24945124,  0.08883171,  0.99958898,  0.048186  ,  0.04847517,
         0.21843432,  0.07531852,  0.06587876,  0.03952069,  0.49872295,
         0.07784432,  0.15417786,  0.10889365,  0.05899693,  0.17453247,
         0.19526397,  0.0543375 ,  0.02431049,  0.16277765,  0.10169214,
         0.08249463,  0.09903959,  0.10541868,  0.04167648,  0.04264191,
         0.09079192,  0.16657089,  0.40884584,  0.06186   ,  0.23722024,
         0.0786528 ,  0.16337461,  0.12536351,  0.04669538,  0.05822513,
         0.0285747 ,  0.73889622,  0.08247597,  0.09589623,  0.09370853],
       [ 0.04059898,  0.08875764,  0.16833208,  0.09702336,  0.13223623,
         0.11198835,  0.09570016,  0.158454  ,  0.20470109,  0.23229079,
         0.05453139,  0.08107227,  0.0391783 ,  0.05286789,  0.07485126,
         0.18430074,  0.07316724,  0.0997096 ,  0.20568107,  0.08820176,
         0.09591305,  0.16986427,  0.11027927,  0.09050177,  0.111886  ,
         0.08037129,  0.0870795 ,  0.08451341,  0.1694591 ,  0.11387589,
         0.14748623,  0.15532532,  0.1090664 ,  0.07503198,  0.11985684,
         0.12403332,  0.10960974,  0.08397666,  0.08094546,  0.09123422,
         0.11487817,  0.0573486 ,  0.1888699 ,  0.08988154,  0.07992422,
         0.09492413,  0.05577597,  0.10281879,  0.0878432 ,  0.07096975]])

alpha3 = np.array([[ 0.03484557,  0.08417818,  0.73594434,  0.04709168,  0.04944708,
         0.20754562,  0.02498781,  0.09445185,  0.16505711,  0.58249605,
         0.0303851 ,  0.03173434,  0.03142629,  0.02738264,  0.12359157,
         0.17672513,  0.0863947 ,  0.08279501,  1.11050826,  0.04704371,
         0.06662902,  0.08903639,  0.24571418,  0.04361992,  0.08561541,
         0.04132842,  0.15287324,  0.07575467,  0.06290612,  0.42667522,
         0.28813976,  0.08699987,  0.28215268,  0.08693804,  0.24607888,
         0.05334552,  0.27227057,  0.04764027,  0.09052961,  0.04633439,
         0.0922487 ,  0.04233203,  0.16161412,  0.0938755 ,  0.02942828,
         0.04936789,  0.03317014,  0.16759067,  0.10764949,  0.03699706],
       [ 0.68177466,  0.03877459,  0.03206141,  0.02690391,  0.24371693,
         0.03298118,  0.08128031,  0.07278614,  0.06187017,  0.0910603 ,
         0.27696978,  0.10623906,  1.00285779,  0.05024943,  0.06303105,
         0.22449951,  0.097174  ,  0.08317877,  0.03195974,  0.53868421,
         0.08677089,  0.15781614,  0.13705747,  0.05742482,  0.16339954,
         0.23823078,  0.06156391,  0.02542087,  0.1833351 ,  0.11325714,
         0.09654993,  0.11344889,  0.11942635,  0.03607929,  0.05261783,
         0.10429822,  0.19622596,  0.40224839,  0.0771445 ,  0.23016553,
         0.11599184,  0.18243424,  0.13021905,  0.05686853,  0.06237535,
         0.02230764,  0.84074774,  0.09290253,  0.11696688,  0.12603612],
       [ 0.03110887,  0.0923186 ,  0.08009442,  0.12563056,  0.18886621,
         0.08314195,  0.13513307,  0.18924226,  0.23882402,  0.16276771,
         0.06495835,  0.10861408,  0.03859062,  0.06827619,  0.05729334,
         0.20332363,  0.06129713,  0.10599763,  0.05021043,  0.10175874,
         0.11211331,  0.21974134,  0.0757865 ,  0.12499535,  0.13528649,
         0.1040515 ,  0.06988978,  0.09075618,  0.22506672,  0.05862453,
         0.10930977,  0.19978251,  0.06977027,  0.08069092,  0.08125821,
         0.16409981,  0.07293896,  0.11345919,  0.07907256,  0.13764658,
         0.12137241,  0.06418751,  0.21341283,  0.0886671 ,  0.10464267,
         0.12270155,  0.05697987,  0.08397263,  0.08134115,  0.0825738 ]])

alpha4 = np.array([[ 0.02753352,  0.03422767,  0.0623842 ,  0.12003546,  0.16201592,
         0.08843774,  0.12916328,  0.14881546,  0.33867034,  0.07830018,
         0.06441216,  0.0811598 ,  0.02873241,  0.06805378,  0.04713236,
         0.24566152,  0.06806281,  0.09829685,  0.05192281,  0.13102264,
         0.08714523,  0.20305916,  0.10448242,  0.12113911,  0.11133884,
         0.07516458,  0.04982088,  0.03571837,  0.18363547,  0.04125766,
         0.11942367,  0.26344308,  0.05975709,  0.07032217,  0.08266808,
         0.11312819,  0.0908765 ,  0.11687015,  0.05611453,  0.14260089,
         0.11903473,  0.08279921,  0.1263163 ,  0.07434172,  0.13384501,
         0.10519722,  0.04792169,  0.09916934,  0.03822312,  0.07102413],
       [ 0.0509883 ,  0.23554786,  0.10050619,  0.12031052,  0.2080867 ,
         0.09570934,  0.13188843,  0.24457771,  0.08311317,  0.44570513,
         0.06169832,  0.15659127,  0.05234335,  0.06852997,  0.09203831,
         0.14329448,  0.06883628,  0.13957444,  0.04020637,  0.06815619,
         0.14924344,  0.19247414,  0.07036543,  0.12786511,  0.15806466,
         0.1507798 ,  0.11464956,  0.24537785,  0.24904689,  0.10346593,
         0.08900356,  0.09253259,  0.07523158,  0.0812188 ,  0.10873947,
         0.25194791,  0.05827088,  0.11203525,  0.11095223,  0.1158748 ,
         0.13993327,  0.04515273,  0.39290607,  0.12417477,  0.06026835,
         0.11466194,  0.09038764,  0.05372519,  0.19468648,  0.10095121],
       [ 0.76095762,  0.03318055,  0.03127369,  0.02695294,  0.25649906,
         0.0308129 ,  0.08501498,  0.07561291,  0.05753769,  0.06960027,
         0.31722155,  0.10384708,  1.3663095 ,  0.05531714,  0.05408816,
         0.25047622,  0.08926983,  0.08082786,  0.02911284,  0.59411796,
         0.08574324,  0.17975096,  0.1221177 ,  0.0549776 ,  0.1963247 ,
         0.24189122,  0.06513333,  0.02064945,  0.19704172,  0.1191394 ,
         0.10673021,  0.10684672,  0.12205775,  0.03520042,  0.04475414,
         0.09944533,  0.20878526,  0.46415015,  0.07620754,  0.22639421,
         0.10059318,  0.20781295,  0.13520351,  0.0528466 ,  0.06251015,
         0.0236387 ,  0.85171654,  0.09158997,  0.09812758,  0.12747851],
       [ 0.02798978,  0.08248528,  0.85825195,  0.05021865,  0.04534667,
         0.18878584,  0.02407902,  0.09877296,  0.17904888,  0.59768964,
         0.02828568,  0.03022011,  0.02643195,  0.02575059,  0.12224473,
         0.19045638,  0.09128421,  0.07203298,  1.42705372,  0.04900721,
         0.07167733,  0.10795472,  0.25212183,  0.04365814,  0.09613416,
         0.04332826,  0.15765639,  0.0679173 ,  0.07735794,  0.4875122 ,
         0.31585583,  0.09807005,  0.32307777,  0.10625543,  0.23362157,
         0.05299684,  0.28991488,  0.03984393,  0.10724174,  0.04813779,
         0.08626642,  0.04290772,  0.1379014 ,  0.08995183,  0.03005562,
         0.06446354,  0.02923728,  0.22573262,  0.10831709,  0.03758892]])
        
f = open("demo.A.topwords", "r")
topwords = []
try:
    for line in f.read().split('\n'):
        topwords.append(line)
finally:
    f.close()

k = 2
for alpha in [alpha2,alpha3,alpha4]:
    print("Number of clusters :",k)
    top_index = pick_top_index(alpha,5)
    
    for i in range(top_index.shape[0]):
        print("Top Alpha Topics in cluster",i)
        ind_alpha_index = top_index[i]
        for index in ind_alpha_index:
            print(index[1],':',topwords[int(index[0])])
